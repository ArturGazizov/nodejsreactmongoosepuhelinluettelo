(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),u=n(13),r=n.n(u),m=n(14),o=n(15),c=n(3),i=n(17),l=n(16),d=function(e){var t=e.persons,n=e.functions;return s.a.createElement("div",null,s.a.createElement("h2",null,"Numerot"),s.a.createElement("ul",null,t.map((function(e){return s.a.createElement("li",{key:e.id},e.name,"\xa0",e.number,s.a.createElement("button",{onClick:n(e.id)}," poista "))}))))},h=function(e){var t=e.addName,n=e.handleNameChange,a=e.handleNumberChange,u=e.newName,r=e.newNumber;return s.a.createElement("form",{onSubmit:t},s.a.createElement("div",null,"nimi: ",s.a.createElement("input",{value:u,onChange:n}),"numero: ",s.a.createElement("input",{value:r,onChange:a})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},f=function(e){var t=e.message;return null===t?null:t.endsWith("ed")?s.a.createElement("div",{className:"success"},t+" on server"):t.length?s.a.createElement("div",{className:"error"},t):null},N=n(2),b=n.n(N),g="/api/persons",p=function(){return b.a.get(g).then((function(e){return e.data}))},v=function(e){return b.a.post(g,e)},w=function(e,t){return b.a.put("".concat(g,"/").concat(e),t)},E=function(e){return b.a.delete("".concat(g,"/").concat(e))},C=function(e){return b.a.get("".concat(g,"/").concat(e))},S=(n(40),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).removeName=function(e){return function(){C(e).then((function(t){window.confirm("Poistetaanko ".concat(t.data[0].name," ?"))&&E(e).then((function(){p().then((function(e){a.setState({persons:e})}))}))}))}},a.addName=function(e){e.preventDefault();var t={name:a.state.newName,number:a.state.newNumber,id:1e6*Math.random()};p().then((function(e){if(e.find((function(e){return e.name===a.state.newName}))){a.setState({nmessage:" '".concat(a.state.newName,"' name must be unique, so it was updated")}),setTimeout((function(){a.setState({nmessage:""})}),5e3);var n=e.find((function(e){return e.name===a.state.newName}));return n.name=t.name,n.number=t.number,void w(n.id,{name:t.name,number:t.number}).then((function(e){204!==e.status&&"204"!==e.status&&"400"!==e.status&&"404"!==e.status&&400!==e.status&&404!==e.status&&p().then((function(e){a.setState({persons:e,newName:"",newNumber:""})}))})).catch((function(e){a.setState({nmessage:"Too short number or name could not be added"}),setTimeout((function(){a.setState({nmessage:""})}),5e3)}))}if(0===a.state.newNumber.length)return a.setState({nmessage:"For '".concat(a.state.newName,"' number not specified ")}),void setTimeout((function(){a.setState({nmessage:""})}),5e3);v(t).then((function(e){204!==e.status&&"204"!==e.status&&"400"!==e.status&&"404"!==e.status&&400!==e.status&&404!==e.status&&a.setState({persons:a.state.persons.concat(e.data),newName:"",newNumber:""})})).catch((function(e){console.log("error"),a.setState({nmessage:e.response.data.error}),setTimeout((function(){a.setState({nmessage:""})}),5e3)}))}))},a.handleNameChange=function(e){a.setState({newName:e.target.value})},a.handleNumberChange=function(e){a.setState({newNumber:e.target.value})},a.state={persons:[{name:"Arto Hellas"}],newName:"",newNumber:"",nmessage:""},a.addName=a.addName.bind(Object(c.a)(a)),a.handleNumberChange=a.handleNumberChange.bind(Object(c.a)(a)),a.handleNameChange=a.handleNameChange.bind(Object(c.a)(a)),a.removeName=a.removeName.bind(Object(c.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;p().then((function(t){e.setState({persons:t})}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"Puhelinluettelo"),s.a.createElement(f,{message:this.state.nmessage}),s.a.createElement(h,{addName:this.addName,handleNameChange:this.handleNameChange,handleNumberChange:this.handleNumberChange,newName:this.state.newName,newNumber:this.state.newNumber}),s.a.createElement(d,{persons:this.state.persons,functions:this.removeName}))}}]),n}(s.a.Component));r.a.render(s.a.createElement(S,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.42f27901.chunk.js.map